# Issue: Update COMMANDS.md with workflow examples

## Overview
# Issue #005.2: Update COMMANDS.md with workflow examples

## Overview
Add comprehensive PRD workflow examples to the main COMMANDS.md file, demonstrating the complete process from PRD creation through epic generation with the new validation and error handling features.

## Files to Modify
1. `COMMANDS.md` (modify)

## Implementation Sketch

Add a new comprehensive PRD workflow section to COMMANDS.md:

```markdown
## PRD Workflow Examples

The CCCC system provides a complete PRD (Product Requirements Document) workflow with validation, error handling, and recovery mechanisms.

### Complete PRD Workflow

#### 1. Create a New PRD

```bash
# Create a new PRD with automatic validation
/cccc:prd:new user-authentication

# Expected output:
# 🔍 Validating PRD name: user-authentication
# ✅ Valid PRD name: user-authentication
# 📁 Creating directory: .cccc/prds
# ✅ Directory structure validated
# 📝 Generating PRD with standardized frontmatter
# 🎉 PRD created successfully: .cccc/prds/user-authentication.md
```

#### 2. Edit the PRD Content

Edit the generated PRD file to add your requirements:

```yaml
---
name: "User Authentication System"
status: "draft"
created: "2025-08-28T02:31:24Z"
updated: "2025-08-28T02:31:24Z"
version: "1.0.0"
author: "CCCC System"
type: "feature"
priority: "high"
estimated_effort: "3 weeks"
github: "[Will be updated when synced to GitHub]"
---

# User Authentication System

## Problem Statement
Our application needs a secure, scalable user authentication system that supports multiple login methods and maintains security best practices.

## Solution Overview
Implement a JWT-based authentication system with OAuth integration, password reset functionality, and role-based access control.

## User Stories

### US001: User Registration
**As a** new user
**I want** to register with email and password
**So that** I can create an account and access the application

**Acceptance Criteria:**
- Email validation and uniqueness checking
- Password strength requirements
- Email verification process
- Account activation workflow
```

#### 3. Parse PRD into Epic

```bash
# Parse the PRD to generate a structured epic
/cccc:prd:parse user-authentication

# Expected output:
# [1/6] Validating PRD exists and is readable
# ✅ PRD validated for parsing: .cccc/prds/user-authentication.md
# [2/6] Validating YAML frontmatter structure
# ✅ PRD frontmatter validated: .cccc/prds/user-authentication.md
# [3/6] Validating PRD content structure
# ✅ PRD content structure validated: .cccc/prds/user-authentication.md
# [4/6] Validating epic generation prerequisites
# ✅ Epic generation prerequisites validated
# [5/6] Generating epic and task files
# 📁 Creating epic directory: .cccc/epics/user-authentication
# [6/6] Validating generated epic structure
# ✅ Generated epic structure is valid (4 tasks)
# 🎉 PRD parsed successfully: .cccc/epics/user-authentication
# 📊 Epic contains: 4 task files
```

#### 4. Review Generated Epic

```bash
# Check the generated epic structure
ls -la .cccc/epics/user-authentication/

# Expected output:
# epic.md          # Epic overview and goals
# 001.md          # Task 1: Database schema design
# 002.md          # Task 2: JWT token service
# 003.md          # Task 3: OAuth integration
# 004.md          # Task 4: Frontend authentication UI
```

### Error Handling Examples

#### Handling Invalid PRD Names

```bash
/cccc:prd:new "invalid name with spaces!"

# Expected output:
# 🔍 Validating PRD name: invalid name with spaces!
# ❌ PRD name contains invalid characters. Use only letters, numbers, dash, underscore
# 💡 Example: "user-auth-v2" or "payment_integration"
```

#### Handling Missing PRD Files

```bash
/cccc:prd:parse nonexistent-prd

# Expected output:
# ❌ PRD not found: .cccc/prds/nonexistent-prd.md
# 💡 Available PRDs:
#    • user-authentication
#    • payment-system
#    • admin-dashboard
```

#### Handling Corrupted PRD Files

```bash
/cccc:prd:parse corrupted-prd

# Expected output:
# ✅ PRD validated for parsing: .cccc/prds/corrupted-prd.md
# ❌ Missing required field 'name' in: .cccc/prds/corrupted-prd.md
# 💡 Required fields: name status created version
# 🚨 PRD Validation Error: Missing required YAML fields
# 💡 Fix the PRD file and try again: .cccc/prds/corrupted-prd.md
# 🔧 Manual recovery: .claude/scripts/cccc/error-recovery.sh prd-parsing corrupted-prd
```

### Recovery Examples

#### Recovering from Failed PRD Creation

```bash
# If PRD creation fails, use recovery script
.claude/scripts/cccc/error-recovery.sh prd-creation user-authentication

# Expected output:
# 🔧 Initializing recovery for operation: prd-creation
# 🔄 Recovering PRD creation for: user-authentication
# 🗏️ Removing corrupted PRD file: .cccc/prds/user-authentication.md
# ✅ Corrupted PRD removed
# 🔍 Validating system state...
# ✅ System state is healthy
```

#### Recovering from Failed PRD Parsing

```bash
# If PRD parsing fails, use recovery script
.claude/scripts/cccc/error-recovery.sh prd-parsing user-authentication

# Expected output:
# 🔧 Initializing recovery for operation: prd-parsing
# 🔄 Recovering PRD parsing for: user-authentication
# 🗏️ Removing partial epic directory: .cccc/epics/user-authentication
# ✅ Partial epic directory removed
# ✅ Source PRD is valid: .cccc/prds/user-authentication.md
# 💡 You can retry parsing with: /cccc:prd:parse user-authentication
```

### Validation Examples

#### System State Validation

```bash
# Validate overall system health
.claude/scripts/cccc/error-recovery.sh validate-state

# Expected output:
# 🔍 Validating system state...
# ✅ Valid directory structure
# 🗏️ Temporary files found:
#    • .cccc/temp-prd.tmp
#    • .cccc/epics/backup.bak
# Remove temporary files? (yes/no): yes
# ✅ Temporary files cleaned up
# ✅ System state is healthy
```

#### PRD Workflow Testing

```bash
# Run comprehensive workflow tests
.claude/scripts/cccc/test-prd-workflow.sh

# Expected output:
# 🚀 Starting PRD workflow validation...
# 🔧 Setting up test environment in: /tmp/tmp.12345
# ✅ Valid directory structure
# 📝 Testing PRD creation workflow...
# ✅ PRD Creation: PASSED
# ⚙️ Testing PRD parsing workflow...
# ✅ PRD Parsing: PASSED
# 🧹 Cleaning up test environment...
# 📊 Test Summary:
#   Setup: ✅ PASSED
#   Creation: ✅ PASSED
#   Parsing: ✅ PASSED
# 🎉 All PRD workflow tests PASSED!
```

### Best Practices

#### PRD Naming Conventions
- Use lowercase with hyphens: `user-auth-system`
- Be descriptive but concise: `payment-integration-v2`
- Avoid special characters: `admin_dashboard` (underscore OK)
- Keep under 50 characters

#### PRD Content Structure
- Always include required sections: Problem Statement, Solution Overview, User Stories
- Use proper user story format: **As a** ... **I want** ... **So that** ...
- Include acceptance criteria for each user story
- Add technical requirements when needed

#### Error Prevention
- Validate PRD content before parsing
- Use descriptive PRD names
- Keep backups of important PRDs
- Run system validation periodically

#### Troubleshooting Workflow
1. Check error messages for specific guidance
2. Use recovery scripts for automatic cleanup
3. Validate system state after errors
4. Check logs in `.cccc/recovery.log`
5. Use validation scripts for debugging

### Integration with Other Commands

The PRD workflow integrates with other CCCC commands:

```bash
# After PRD parsing, analyze the epic
/cccc:epic:analyze user-authentication

# Sync epic to GitHub/GitLab
/cccc:epic:sync user-authentication

# Update project context
/context:update
```

This comprehensive workflow ensures reliable, validated PRD management with automatic error handling and recovery capabilities.
```

## Acceptance Criteria
- [ ] Complete workflow examples from creation to epic generation
- [ ] Error handling examples with expected outputs
- [ ] Recovery procedure examples with detailed steps
- [ ] Validation examples showing system health checks
- [ ] Best practices section with naming conventions
- [ ] Integration examples with other CCCC commands
- [ ] Troubleshooting workflow with step-by-step guidance
- [ ] Real-world examples with realistic content

## Dependencies
- Issue #002.1: Template structure must be finalized
- Issue #004.2: New command error handling must be complete
- Issue #004.3: Parse command error handling must be complete

## Definition of Done
- [ ] Code implemented according to implementation sketch
- [ ] All acceptance criteria met
- [ ] Documentation follows CCCC patterns and standards
- [ ] Examples are tested and validated
- [ ] Ready for end-to-end testing (Issue #006.1)\n\n---\nDepends on #37\nDepends on #41\nDepends on #42

## Comments Processing Summary
2025-08-28T11:37:48Z: Updated from platform

### Structured Updates Applied:

---
*Last updated from platform: 2025-08-28T11:37:48Z*
