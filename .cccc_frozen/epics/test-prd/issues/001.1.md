# Issue: Create validation script framework

## Overview
# Issue #001.1: Create validation script framework

## Overview
Create the foundational validation script that provides reusable functions for validating PRD files, YAML frontmatter, and directory structures used by the test harness.

## Files to Modify
1. `.claude/scripts/cccc/validate-prd.sh` (new)

## Implementation Sketch
```bash
#!/bin/bash
# validate-prd.sh - PRD validation framework

# Core validation functions
validate_prd_exists() {
    local prd_name="$1"
    local prd_path=".cccc/prds/${prd_name}.md"
    
    if [[ ! -f "$prd_path" ]]; then
        echo "‚ùå PRD not found: $prd_path"
        return 1
    fi
    echo "‚úÖ PRD exists: $prd_path"
    return 0
}

validate_yaml_frontmatter() {
    local file_path="$1"
    
    # Check if file starts with ---
    if ! head -1 "$file_path" | grep -q "^---$"; then
        echo "‚ùå Missing YAML frontmatter in: $file_path"
        return 1
    fi
    
    # Extract frontmatter and validate YAML syntax
    local frontmatter=$(sed -n '1,/^---$/p' "$file_path" | head -n -1 | tail -n +2)
    
    # Validate required fields exist
    local required_fields=("name" "status" "created")
    for field in "${required_fields[@]}"; do
        if ! echo "$frontmatter" | grep -q "^${field}:"; then
            echo "‚ùå Missing required field '$field' in: $file_path"
            return 1
        fi
    done
    
    echo "‚úÖ Valid YAML frontmatter in: $file_path"
    return 0
}

validate_directory_structure() {
    local base_dir="$1"
    local required_dirs=(".cccc" ".cccc/prds" ".claude" ".claude/commands")
    
    for dir in "${required_dirs[@]}"; do
        if [[ ! -d "$base_dir/$dir" ]]; then
            echo "‚ùå Missing directory: $base_dir/$dir"
            return 1
        fi
    done
    
    echo "‚úÖ Valid directory structure"
    return 0
}

# Validation result reporting
report_validation_results() {
    local test_name="$1"
    local exit_code="$2"
    
    if [[ $exit_code -eq 0 ]]; then
        echo "üéâ $test_name: PASSED"
    else
        echo "üí• $test_name: FAILED (exit code: $exit_code)"
    fi
}
```

## Acceptance Criteria
- [ ] Script provides `validate_prd_exists()` function
- [ ] Script provides `validate_yaml_frontmatter()` function  
- [ ] Script provides `validate_directory_structure()` function
- [ ] Script provides `report_validation_results()` function
- [ ] Functions return proper exit codes (0=success, 1=failure)
- [ ] Functions provide clear success/error messages with emoji indicators
- [ ] Script can be sourced by other test scripts

## Dependencies
None - this is a foundational script

## Definition of Done
- [ ] Code implemented according to implementation sketch
- [ ] All acceptance criteria met
- [ ] Script follows CCCC bash patterns and standards
- [ ] Script can be sourced and functions tested independently
- [ ] Ready for workflow test runner (Issue #001.2)

## Comments Processing Summary
2025-08-28T11:37:01Z: Updated from platform

### Structured Updates Applied:


**jeunesse.paulien** (2025-08-28T07:00:40.066Z):
mentioned in merge request !2

**jeunesse.paulien** (2025-08-28T05:49:07.653Z):
mentioned in merge request !1

**jeunesse.paulien** (2025-08-28T05:28:40.472Z):
Put the script in ./claude/scripts/cccc/prd/validate-prd.sh

**jeunesse.paulien** (2025-08-28T04:48:37.341Z):
mentioned in commit 638187a13d7082fa998ebece8341ad1e4758104d

**jeunesse.paulien** (2025-08-28T04:45:06.360Z):
mentioned in commit 32aaaea4229c13a7ac76db511406919e38b72fe2

**jeunesse.paulien** (2025-08-28T04:42:32.964Z):
mentioned in issue #45

**jeunesse.paulien** (2025-08-28T04:42:12.947Z):
mentioned in issue #36


---
*Last updated from platform: 2025-08-28T11:37:01Z*
